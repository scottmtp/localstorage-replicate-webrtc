!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.localstorageReplicate=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("util"),e=a("replicate-common"),f=function(a,b,c,d){e.call(this,a,b,c),this.localStorage=d,this.replData=[],this.marker="__end__"};d.inherits(f,e),b.exports=f,f.prototype.receiveData=function(a){var b=this;a==b.marker?b._getAndClearData():b.replData.push(a)},f.prototype._getAndClearData=function(){var a=this,b=a.replData.join("");a.replData=[];var c=JSON.parse(b),d=c.key,e=JSON.stringify(c.data);a.localStorage.setItem(d,e),a.emit("endpeerreplicate",d,e)},f.prototype.replicate=function(a){var b=this,c=JSON.parse(b.localStorage.getItem(a)),d={data:c,key:a};return b.streams.forEach(function(a){a.write(JSON.stringify(d)),a.write(b.marker)}),Promise.resolve()}},{"replicate-common":41,util:30}],2:[function(a,b,c){!function(a){"use strict";var c="cuid",d=0,e=4,f=36,g=Math.pow(f,e),h=function(a,b){var c="000000000"+a;return c.substr(c.length-b)},i=function(){return h((Math.random()*g<<0).toString(f),e)},j=function(){return d=g>d?d:0,d++,d-1},k=function(){var a,b="c",c=(new Date).getTime().toString(f),d=k.fingerprint(),g=i()+i();return a=h(j().toString(f),e),b+c+a+d+g};k.slug=function(){var a,b=(new Date).getTime().toString(36),c=k.fingerprint().slice(0,1)+k.fingerprint().slice(-1),d=i().slice(-2);return a=j().toString(36).slice(-4),b.slice(-2)+a+c+d},k.globalCount=function(){var a=function(){var a,b=0;for(a in window)b++;return b}();return k.globalCount=function(){return a},a},k.fingerprint=function(){return h((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+k.globalCount().toString(36),4)},a.register?a.register(c,k):"undefined"!=typeof b?b.exports=k:a[c]=k}(this.applitude||this)},{}],3:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(b){}}function h(){var a;try{a=c.storage.debug}catch(b){}return a}function i(){try{return window.localStorage}catch(a){}}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":4}],4:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;d>e;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:5}],5:[function(a,b,c){function d(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b["long"]?f(a):e(a)}},{}],6:[function(a,b,c){},{}],7:[function(a,b,c){function d(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(a){return this instanceof e?(this.length=0,this.parent=void 0,"number"==typeof a?f(this,a):"string"==typeof a?g(this,a,arguments.length>1?arguments[1]:"utf8"):h(this,a)):arguments.length>1?new e(a,arguments[1]):new e(a)}function f(a,b){if(a=n(a,0>b?0:0|o(b)),!e.TYPED_ARRAY_SUPPORT)for(var c=0;b>c;c++)a[c]=0;return a}function g(a,b,c){("string"!=typeof c||""===c)&&(c="utf8");var d=0|q(b,c);return a=n(a,d),a.write(b,c),a}function h(a,b){if(e.isBuffer(b))return i(a,b);if(W(b))return j(a,b);if(null==b)throw new TypeError("must start with number, buffer, array or string");return"undefined"!=typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer?k(a,b):b.length?l(a,b):m(a,b)}function i(a,b){var c=0|o(b.length);return a=n(a,c),b.copy(a,0,0,c),a}function j(a,b){var c=0|o(b.length);a=n(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function k(a,b){var c=0|o(b.length);a=n(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function l(a,b){var c=0|o(b.length);a=n(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function m(a,b){var c,d=0;"Buffer"===b.type&&W(b.data)&&(c=b.data,d=0|o(c.length)),a=n(a,d);for(var e=0;d>e;e+=1)a[e]=255&c[e];return a}function n(a,b){e.TYPED_ARRAY_SUPPORT?a=e._augment(new Uint8Array(b)):(a.length=b,a._isBuffer=!0);var c=0!==b&&b<=e.poolSize>>>1;return c&&(a.parent=X),a}function o(a){if(a>=d())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d().toString(16)+" bytes");return 0|a}function p(a,b){if(!(this instanceof p))return new p(a,b);var c=new e(a,b);return delete c.parent,c}function q(a,b){"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return O(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return R(a).length;default:if(d)return O(a).length;b=(""+b).toLowerCase(),d=!0}}function r(a,b,c){var d=!1;if(b=0|b,c=void 0===c||c===1/0?this.length:0|c,a||(a="utf8"),0>b&&(b=0),c>this.length&&(c=this.length),b>=c)return"";for(;;)switch(a){case"hex":return C(this,b,c);case"utf8":case"utf-8":return z(this,b,c);case"ascii":return A(this,b,c);case"binary":return B(this,b,c);case"base64":return y(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function s(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function t(a,b,c,d){return S(O(b,a.length-c),a,c,d)}function u(a,b,c,d){return S(P(b),a,c,d)}function v(a,b,c,d){return u(a,b,c,d)}function w(a,b,c,d){return S(R(b),a,c,d)}function x(a,b,c,d){return S(Q(b,a.length-c),a,c,d)}function y(a,b,c){return 0===b&&c===a.length?U.fromByteArray(a):U.fromByteArray(a.slice(b,c))}function z(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=T(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+T(e)}function A(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(127&a[e]);return d}function B(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function C(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=N(a[f]);return e}function D(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function E(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function F(a,b,c,d,f,g){if(!e.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>f||g>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range")}function G(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);f>e;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function H(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);f>e;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function I(a,b,c,d,e,f){if(b>e||f>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(0>c)throw new RangeError("index out of range")}function J(a,b,c,d,e){return e||I(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(a,b,c,d,23,4),c+4}function K(a,b,c,d,e){return e||I(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(a,b,c,d,52,8),c+8}function L(a){if(a=M(a).replace(Z,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function M(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function N(a){return 16>a?"0"+a.toString(16):a.toString(16)}function O(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;d>g;g++){if(c=a.charCodeAt(g),c>55295&&57344>c){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(56320>c){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=e-55296<<10|c-56320|65536,e=null}else e&&((b-=3)>-1&&f.push(239,191,189),e=null);if(128>c){if((b-=1)<0)break;f.push(c)}else if(2048>c){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(65536>c){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(2097152>c))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function P(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function Q(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function R(a){return U.toByteArray(L(a))}function S(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function T(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}var U=a("base64-js"),V=a("ieee754"),W=a("is-array");c.Buffer=e,c.SlowBuffer=p,c.INSPECT_MAX_BYTES=50,e.poolSize=8192;var X={};e.TYPED_ARRAY_SUPPORT=function(){function a(){}try{var b=new ArrayBuffer(0),c=new Uint8Array(b);return c.foo=function(){return 42},c.constructor=a,42===c.foo()&&c.constructor===a&&"function"==typeof c.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(d){return!1}}(),e.isBuffer=function(a){return!(null==a||!a._isBuffer)},e.compare=function(a,b){if(!e.isBuffer(a)||!e.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,f=0,g=Math.min(c,d);g>f&&a[f]===b[f];)++f;return f!==g&&(c=a[f],d=b[f]),d>c?-1:c>d?1:0},e.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(a,b){if(!W(a))throw new TypeError("list argument must be an Array of Buffers.");if(0===a.length)return new e(0);if(1===a.length)return a[0];var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var d=new e(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(d,f),f+=g.length}return d},e.byteLength=q,e.prototype.length=void 0,e.prototype.parent=void 0,e.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?z(this,0,a):r.apply(this,arguments)},e.prototype.equals=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===e.compare(this,a)},e.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},e.prototype.compare=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?0:e.compare(this,a)},e.prototype.indexOf=function(a,b){function c(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[-1===d?0:e-d]){if(-1===d&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(b>2147483647?b=2147483647:-2147483648>b&&(b=-2147483648),b>>=0,0===this.length)return-1;if(b>=this.length)return-1;if(0>b&&(b=Math.max(this.length+b,0)),"string"==typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,b);if(e.isBuffer(a))return c(this,a,b);if("number"==typeof a)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,b):c(this,[a],b);throw new TypeError("val must be string, number or Buffer")},e.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},e.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},e.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0);else{var e=d;d=b,b=0|c,c=e}var f=this.length-b;if((void 0===c||c>f)&&(c=f),a.length>0&&(0>c||0>b)||b>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(var g=!1;;)switch(d){case"hex":return s(this,a,b,c);case"utf8":case"utf-8":return t(this,a,b,c);case"ascii":return u(this,a,b,c);case"binary":return v(this,a,b,c);case"base64":return w(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,a,b,c);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a);var d;if(e.TYPED_ARRAY_SUPPORT)d=e._augment(this.subarray(a,b));else{var f=b-a;d=new e(f,void 0);for(var g=0;f>g;g++)d[g]=this[g+a]}return d.length&&(d.parent=this.parent||this),d},e.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||E(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},e.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||E(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},e.prototype.readUInt8=function(a,b){return b||E(a,1,this.length),this[a]},e.prototype.readUInt16LE=function(a,b){return b||E(a,2,this.length),this[a]|this[a+1]<<8},e.prototype.readUInt16BE=function(a,b){return b||E(a,2,this.length),this[a]<<8|this[a+1]},e.prototype.readUInt32LE=function(a,b){return b||E(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},e.prototype.readUInt32BE=function(a,b){return b||E(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},e.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||E(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},e.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||E(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},e.prototype.readInt8=function(a,b){return b||E(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},e.prototype.readInt16LE=function(a,b){b||E(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},e.prototype.readInt16BE=function(a,b){b||E(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},e.prototype.readInt32LE=function(a,b){return b||E(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},e.prototype.readInt32BE=function(a,b){return b||E(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},e.prototype.readFloatLE=function(a,b){return b||E(a,4,this.length),V.read(this,a,!0,23,4)},e.prototype.readFloatBE=function(a,b){return b||E(a,4,this.length),V.read(this,a,!1,23,4)},e.prototype.readDoubleLE=function(a,b){return b||E(a,8,this.length),V.read(this,a,!0,52,8)},e.prototype.readDoubleBE=function(a,b){return b||E(a,8,this.length),V.read(this,a,!1,52,8)},e.prototype.writeUIntLE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||F(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},e.prototype.writeUIntBE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||F(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},e.prototype.writeUInt8=function(a,b,c){return a=+a,b=0|b,c||F(this,a,b,1,255,0),e.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=a,b+1},e.prototype.writeUInt16LE=function(a,b,c){return a=+a,b=0|b,c||F(this,a,b,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):G(this,a,b,!0),b+2},e.prototype.writeUInt16BE=function(a,b,c){return a=+a,b=0|b,c||F(this,a,b,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):G(this,a,b,!1),b+2},e.prototype.writeUInt32LE=function(a,b,c){return a=+a,b=0|b,c||F(this,a,b,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a):H(this,a,b,!0),b+4},e.prototype.writeUInt32BE=function(a,b,c){return a=+a,b=0|b,c||F(this,a,b,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):H(this,a,b,!1),b+4},e.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);F(this,a,b,c,e-1,-e)}var f=0,g=1,h=0>a?1:0;for(this[b]=255&a;++f<c&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},e.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);F(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0>a?1:0;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},e.prototype.writeInt8=function(a,b,c){return a=+a,b=0|b,c||F(this,a,b,1,127,-128),e.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[b]=a,b+1},e.prototype.writeInt16LE=function(a,b,c){return a=+a,b=0|b,c||F(this,a,b,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):G(this,a,b,!0),b+2},e.prototype.writeInt16BE=function(a,b,c){return a=+a,b=0|b,c||F(this,a,b,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):G(this,a,b,!1),b+2},e.prototype.writeInt32LE=function(a,b,c){return a=+a,b=0|b,c||F(this,a,b,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):H(this,a,b,!0),b+4},e.prototype.writeInt32BE=function(a,b,c){return a=+a,b=0|b,c||F(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),e.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):H(this,a,b,!1),b+4},e.prototype.writeFloatLE=function(a,b,c){return J(this,a,b,!0,c)},e.prototype.writeFloatBE=function(a,b,c){return J(this,a,b,!1,c)},e.prototype.writeDoubleLE=function(a,b,c){return K(this,a,b,!0,c)},e.prototype.writeDoubleBE=function(a,b,c){return K(this,a,b,!1,c)},e.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&c>d&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var f=d-c;if(1e3>f||!e.TYPED_ARRAY_SUPPORT)for(var g=0;f>g;g++)a[g+b]=this[g+c];else a._set(this.subarray(c,c+f),b);return f},e.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),b>c)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new RangeError("start out of bounds");if(0>c||c>this.length)throw new RangeError("end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=O(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},e.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(e.TYPED_ARRAY_SUPPORT)return new e(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Y=e.prototype;e._augment=function(a){return a.constructor=e,a._isBuffer=!0,a._set=a.set,a.get=Y.get,a.set=Y.set,a.write=Y.write,a.toString=Y.toString,a.toLocaleString=Y.toString,a.toJSON=Y.toJSON,a.equals=Y.equals,a.compare=Y.compare,a.indexOf=Y.indexOf,a.copy=Y.copy,a.slice=Y.slice,a.readUIntLE=Y.readUIntLE,a.readUIntBE=Y.readUIntBE,a.readUInt8=Y.readUInt8,a.readUInt16LE=Y.readUInt16LE,a.readUInt16BE=Y.readUInt16BE,a.readUInt32LE=Y.readUInt32LE,a.readUInt32BE=Y.readUInt32BE,a.readIntLE=Y.readIntLE,a.readIntBE=Y.readIntBE,a.readInt8=Y.readInt8,a.readInt16LE=Y.readInt16LE,a.readInt16BE=Y.readInt16BE,a.readInt32LE=Y.readInt32LE,a.readInt32BE=Y.readInt32BE,a.readFloatLE=Y.readFloatLE,a.readFloatBE=Y.readFloatBE,a.readDoubleLE=Y.readDoubleLE,a.readDoubleBE=Y.readDoubleBE,a.writeUInt8=Y.writeUInt8,a.writeUIntLE=Y.writeUIntLE,a.writeUIntBE=Y.writeUIntBE,a.writeUInt16LE=Y.writeUInt16LE,a.writeUInt16BE=Y.writeUInt16BE,a.writeUInt32LE=Y.writeUInt32LE,a.writeUInt32BE=Y.writeUInt32BE,a.writeIntLE=Y.writeIntLE,a.writeIntBE=Y.writeIntBE,a.writeInt8=Y.writeInt8,a.writeInt16LE=Y.writeInt16LE,a.writeInt16BE=Y.writeInt16BE,a.writeInt32LE=Y.writeInt32LE,a.writeInt32BE=Y.writeInt32BE,a.writeFloatLE=Y.writeFloatLE,a.writeFloatBE=Y.writeFloatBE,a.writeDoubleLE=Y.writeDoubleLE,a.writeDoubleBE=Y.writeDoubleBE,a.fill=Y.fill,a.inspect=Y.inspect,a.toArrayBuffer=Y.toArrayBuffer,a};var Z=/[^+\/0-9A-z\-]/g},{"base64-js":8,ieee754:9,"is-array":10}],8:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g||b===l?62:b===h||b===m?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0),l="-".charCodeAt(0),m="_".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],9:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],10:[function(a,b,c){var d=Array.isArray,e=Object.prototype.toString;b.exports=d||function(a){return!!a&&"[object Array]"==e.call(a)}},{}],11:[function(a,b,c){b.exports=function(){var b=a("events"),c={};return c.createDomain=c.create=function(){function a(a){c.emit("error",a)}var c=new b.EventEmitter;return c.add=function(b){b.on("error",a)},c.remove=function(b){b.removeListener("error",a)},c.bind=function(b){return function(){var c=Array.prototype.slice.call(arguments);try{b.apply(null,c)}catch(d){a(d)}}},c.intercept=function(b){return function(c){if(c)a(c);else{var d=Array.prototype.slice.call(arguments,1);try{b.apply(null,d)}catch(c){a(c)}}}},c.run=function(b){try{b()}catch(c){a(c)}return this},c.dispose=function(){return this.removeAllListeners(),this},c.enter=c.exit=function(){return this},c},c}.call(this)},{events:12}],12:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],13:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],14:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],15:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],16:[function(a,b,c){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":17}],17:[function(a,b,c){(function(c){function d(a){
return this instanceof d?(i.call(this,a),j.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||c.nextTick(this.end.bind(this))}function f(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}b.exports=d;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},h=a("core-util-is");h.inherits=a("inherits");var i=a("./_stream_readable"),j=a("./_stream_writable");h.inherits(d,i),f(g(j.prototype),function(a){d.prototype[a]||(d.prototype[a]=j.prototype[a])})}).call(this,a("_process"))},{"./_stream_readable":19,"./_stream_writable":21,_process:15,"core-util-is":22,inherits:13}],18:[function(a,b,c){function d(a){return this instanceof d?void e.call(this,a):new d(a)}b.exports=d;var e=a("./_stream_transform"),f=a("core-util-is");f.inherits=a("inherits"),f.inherits(d,e),d.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":20,"core-util-is":22,inherits:13}],19:[function(a,b,c){(function(c){function d(b,c){var d=a("./_stream_duplex");b=b||{};var e=b.highWaterMark,f=b.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.readableObjectMode),this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(C||(C=a("string_decoder/").StringDecoder),this.decoder=new C(b.encoding),this.encoding=b.encoding)}function e(b){a("./_stream_duplex");return this instanceof e?(this._readableState=new d(b,this),this.readable=!0,void A.call(this)):new e(b)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(B.isNullOrUndefined(c))b.reading=!1,b.ended||k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),e||(b.reading=!1),b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&l(a)),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=E)a=E;else{a--;for(var b=1;32>b;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:isNaN(a)||B.isNull(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:0>=a?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return B.isBuffer(b)||B.isString(b)||B.isNullOrUndefined(b)||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,l(a)}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(D("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?c.nextTick(function(){m(a)}):m(a))}function m(a){D("emit readable"),a.emit("readable"),s(a)}function n(a,b){b.readingMore||(b.readingMore=!0,c.nextTick(function(){o(a,b)}))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(D("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;D("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&z.listenerCount(a,"data")&&(b.flowing=!0,s(a))}}function q(a,b){b.resumeScheduled||(b.resumeScheduled=!0,c.nextTick(function(){r(a,b)}))}function r(a,b){b.resumeScheduled=!1,a.emit("resume"),s(a),b.flowing&&!b.reading&&a.read(0)}function s(a){var b=a._readableState;if(D("flow",b.flowing),b.flowing)do var c=a.read();while(null!==c&&b.flowing)}function t(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):y.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new y(a);for(var i=0,j=0,k=d.length;k>j&&a>i;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function u(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");b.endEmitted||(b.ended=!0,c.nextTick(function(){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function v(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function w(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}b.exports=e;var x=a("isarray"),y=a("buffer").Buffer;e.ReadableState=d;var z=a("events").EventEmitter;z.listenerCount||(z.listenerCount=function(a,b){return a.listeners(b).length});var A=a("stream"),B=a("core-util-is");B.inherits=a("inherits");var C,D=a("util");D=D&&D.debuglog?D.debuglog("stream"):function(){},B.inherits(e,A),e.prototype.push=function(a,b){var c=this._readableState;return B.isString(a)&&!c.objectMode&&(b=b||c.defaultEncoding,b!==c.encoding&&(a=new y(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.setEncoding=function(b){return C||(C=a("string_decoder/").StringDecoder),this._readableState.decoder=new C(b),this._readableState.encoding=b,this};var E=8388608;e.prototype.read=function(a){D("read",a);var b=this._readableState,c=a;if((!B.isNumber(a)||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return D("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?u(this):l(this),null;if(a=i(a,b),0===a&&b.ended)return 0===b.length&&u(this),null;var d=b.needReadable;D("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,D("length less than watermark",d)),(b.ended||b.reading)&&(d=!1,D("reading or ended",d)),d&&(D("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=i(c,b));var e;return e=a>0?t(a,b):null,B.isNull(e)&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),c!==a&&b.ended&&0===b.length&&u(this),B.isNull(e)||this.emit("data",e),e},e.prototype._read=function(a){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){D("onunpipe"),a===l&&f()}function e(){D("onend"),a.end()}function f(){D("cleanup"),a.removeListener("close",i),a.removeListener("finish",j),a.removeListener("drain",q),a.removeListener("error",h),a.removeListener("unpipe",d),l.removeListener("end",e),l.removeListener("end",f),l.removeListener("data",g),!m.awaitDrain||a._writableState&&!a._writableState.needDrain||q()}function g(b){D("ondata");var c=a.write(b);!1===c&&(D("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function h(b){D("onerror",b),k(),a.removeListener("error",h),0===z.listenerCount(a,"error")&&a.emit("error",b)}function i(){a.removeListener("finish",j),k()}function j(){D("onfinish"),a.removeListener("close",i),k()}function k(){D("unpipe"),l.unpipe(a)}var l=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=a;break;case 1:m.pipes=[m.pipes,a];break;default:m.pipes.push(a)}m.pipesCount+=1,D("pipe count=%d opts=%j",m.pipesCount,b);var n=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,o=n?e:f;m.endEmitted?c.nextTick(o):l.once("end",o),a.on("unpipe",d);var q=p(l);return a.on("drain",q),l.on("data",g),a._events&&a._events.error?x(a._events.error)?a._events.error.unshift(h):a._events.error=[h,a._events.error]:a.on("error",h),a.once("close",i),a.once("finish",j),a.emit("pipe",l),m.flowing||(D("pipe resume"),l.resume()),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;d>e;e++)c[e].emit("unpipe",this);return this}var e=w(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var d=A.prototype.on.call(this,a,b);if("data"===a&&!1!==this._readableState.flowing&&this.resume(),"readable"===a&&this.readable){var e=this._readableState;if(!e.readableListening)if(e.readableListening=!0,e.emittedReadable=!1,e.needReadable=!0,e.reading)e.length&&l(this,e);else{var f=this;c.nextTick(function(){D("readable nexttick read 0"),f.read(0)})}}return d},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){var a=this._readableState;return a.flowing||(D("resume"),a.flowing=!0,a.reading||(D("resume read 0"),this.read(0)),q(this,a)),this},e.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(D("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(D("wrapped data"),b.decoder&&(e=b.decoder.write(e)),e&&(b.objectMode||e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)B.isFunction(a[e])&&B.isUndefined(this[e])&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return v(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){D("wrapped _read",b),c&&(c=!1,a.resume())},d},e._fromList=t}).call(this,a("_process"))},{"./_stream_duplex":17,_process:15,buffer:7,"core-util-is":22,events:12,inherits:13,isarray:14,stream:27,"string_decoder/":28,util:6}],20:[function(a,b,c){function d(a,b){this.afterTransform=function(a,c){return e(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function e(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,i.isNullOrUndefined(c)||a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function f(a){if(!(this instanceof f))return new f(a);h.call(this,a),this._transformState=new d(a,this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){i.isFunction(this._flush)?this._flush(function(a){g(b,a)}):g(b)})}function g(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=f;var h=a("./_stream_duplex"),i=a("core-util-is");i.inherits=a("inherits"),i.inherits(f,h),f.prototype.push=function(a,b){return this._transformState.needTransform=!1,h.prototype.push.call(this,a,b)},f.prototype._transform=function(a,b,c){throw new Error("not implemented")},f.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},f.prototype._read=function(a){var b=this._transformState;i.isNull(b.writechunk)||!b.writecb||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))}},{"./_stream_duplex":17,"core-util-is":22,inherits:13}],21:[function(a,b,c){(function(c){function d(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function e(b,c){var d=a("./_stream_duplex");b=b||{};var e=b.highWaterMark,f=b.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var g=b.decodeStrings===!1;this.decodeStrings=!g,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){n(c,a)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function f(b){var c=a("./_stream_duplex");return this instanceof f||this instanceof c?(this._writableState=new e(b,this),this.writable=!0,void x.call(this)):new f(b)}function g(a,b,d){var e=new Error("write after end");a.emit("error",e),c.nextTick(function(){d(e)})}function h(a,b,d,e){var f=!0;if(!(w.isBuffer(d)||w.isString(d)||w.isNullOrUndefined(d)||b.objectMode)){var g=new TypeError("Invalid non-string/buffer chunk");a.emit("error",g),c.nextTick(function(){e(g)}),f=!1}return f}function i(a,b,c){return!a.objectMode&&a.decodeStrings!==!1&&w.isString(b)&&(b=new v(b,c)),b}function j(a,b,c,e,f){c=i(b,c,e),w.isBuffer(c)&&(e="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;return h||(b.needDrain=!0),b.writing||b.corked?b.buffer.push(new d(c,e,f)):k(a,b,!1,g,c,e,f),h}function k(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function l(a,b,d,e,f){d?c.nextTick(function(){b.pendingcb--,f(e)}):(b.pendingcb--,f(e)),a._writableState.errorEmitted=!0,a.emit("error",e)}function m(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function n(a,b){var d=a._writableState,e=d.sync,f=d.writecb;if(m(d),b)l(a,d,e,b,f);else{var g=r(a,d);g||d.corked||d.bufferProcessing||!d.buffer.length||q(a,d),e?c.nextTick(function(){o(a,d,g,f)}):o(a,d,g,f)}}function o(a,b,c,d){c||p(a,b),b.pendingcb--,d(),t(a,b)}function p(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function q(a,b){if(b.bufferProcessing=!0,a._writev&&b.buffer.length>1){for(var c=[],d=0;d<b.buffer.length;d++)c.push(b.buffer[d].callback);b.pendingcb++,k(a,b,!0,b.length,b.buffer,"",function(a){for(var d=0;d<c.length;d++)b.pendingcb--,c[d](a)}),b.buffer=[]}else{for(var d=0;d<b.buffer.length;d++){var e=b.buffer[d],f=e.chunk,g=e.encoding,h=e.callback,i=b.objectMode?1:f.length;if(k(a,b,!1,i,f,g,h),b.writing){d++;break}}d<b.buffer.length?b.buffer=b.buffer.slice(d):b.buffer.length=0}b.bufferProcessing=!1}function r(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function s(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function t(a,b){var c=r(a,b);return c&&(0===b.pendingcb?(s(a,b),b.finished=!0,a.emit("finish")):s(a,b)),c}function u(a,b,d){b.ending=!0,t(a,b),d&&(b.finished?c.nextTick(d):a.once("finish",d)),b.ended=!0}b.exports=f;var v=a("buffer").Buffer;f.WritableState=e;var w=a("core-util-is");w.inherits=a("inherits");var x=a("stream");w.inherits(f,x),f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},f.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return w.isFunction(b)&&(c=b,b=null),w.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),w.isFunction(c)||(c=function(){}),d.ended?g(this,d,c):h(this,d,a,c)&&(d.pendingcb++,e=j(this,d,a,b,c)),e},f.prototype.cork=function(){var a=this._writableState;a.corked++},f.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.buffer.length||q(this,a))},f.prototype._write=function(a,b,c){c(new Error("not implemented"))},f.prototype._writev=null,f.prototype.end=function(a,b,c){var d=this._writableState;w.isFunction(a)?(c=a,a=null,b=null):w.isFunction(b)&&(c=b,b=null),w.isNullOrUndefined(a)||this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||u(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":17,_process:15,buffer:7,"core-util-is":22,inherits:13,stream:27}],22:[function(a,b,c){(function(a){function b(a){return Array.isArray(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return l(a)&&"[object RegExp]"===r(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return l(a)&&"[object Date]"===r(a)}function n(a){return l(a)&&("[object Error]"===r(a)||a instanceof Error)}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function q(b){return a.isBuffer(b)}function r(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=q}).call(this,a("buffer").Buffer)},{buffer:7}],23:[function(a,b,c){b.exports=a("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":18}],24:[function(a,b,c){c=b.exports=a("./lib/_stream_readable.js"),c.Stream=a("stream"),c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":17,"./lib/_stream_passthrough.js":18,"./lib/_stream_readable.js":19,"./lib/_stream_transform.js":20,"./lib/_stream_writable.js":21,stream:27}],25:[function(a,b,c){b.exports=a("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":20}],26:[function(a,b,c){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":21}],27:[function(a,b,c){function d(){e.call(this)}b.exports=d;var e=a("events").EventEmitter,f=a("inherits");f(d,e),d.Readable=a("readable-stream/readable.js"),d.Writable=a("readable-stream/writable.js"),d.Duplex=a("readable-stream/duplex.js"),d.Transform=a("readable-stream/transform.js"),d.PassThrough=a("readable-stream/passthrough.js"),d.Stream=d,d.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&j.pause&&j.pause()}function d(){j.readable&&j.resume&&j.resume()}function f(){k||(k=!0,a.end())}function g(){k||(k=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(i(),0===e.listenerCount(this,"error"))throw a}function i(){j.removeListener("data",c),a.removeListener("drain",d),j.removeListener("end",f),j.removeListener("close",g),j.removeListener("error",h),a.removeListener("error",h),j.removeListener("end",i),j.removeListener("close",i),a.removeListener("close",i)}var j=this;j.on("data",c),a.on("drain",d),a._isStdio||b&&b.end===!1||(j.on("end",f),j.on("close",g));var k=!1;return j.on("error",h),a.on("error",h),j.on("end",i),j.on("close",i),a.on("close",i),a.emit("pipe",j),a}},{events:12,inherits:13,"readable-stream/duplex.js":16,"readable-stream/passthrough.js":23,"readable-stream/readable.js":24,"readable-stream/transform.js":25,"readable-stream/writable.js":26}],28:[function(a,b,c){function d(a){if(a&&!i(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function g(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var h=a("buffer").Buffer,i=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},j=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void(this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};j.prototype.write=function(a){for(var b="";this.charLength;){var c=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,c),this.charReceived+=c,this.charReceived<this.charLength)return"";a=a.slice(c,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var d=b.charCodeAt(b.length-1);if(!(d>=55296&&56319>=d)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived),b+=a.toString(this.encoding,0,e);var e=b.length-1,d=b.charCodeAt(e);if(d>=55296&&56319>=d){var f=this.surrogateSize;return this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),b.substring(0,e)}return b},j.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(2>=b&&c>>4==14){this.charLength=3;break}if(3>=b&&c>>3==30){this.charLength=4;break}}this.charReceived=b},j.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:7}],29:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],30:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":29,_process:15,inherits:13}],31:[function(a,b,c){"use strict";b.exports=a("./lib")},{"./lib":36}],32:[function(a,b,c){"use strict";function d(){}function e(a){try{return a.then}catch(b){return q=b,r}}function f(a,b){try{return a(b)}catch(c){return q=c,r}}function g(a,b,c){try{a(b,c)}catch(d){return q=d,r}}function h(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._41=0,this._86=null,this._17=[],a!==d&&o(a,this)}function i(a,b,c){return new a.constructor(function(e,f){var g=new h(d);g.then(e,f),j(a,new n(b,c,g))})}function j(a,b){for(;3===a._41;)a=a._86;return 0===a._41?void a._17.push(b):void p(function(){var c=1===a._41?b.onFulfilled:b.onRejected;if(null===c)return void(1===a._41?k(b.promise,a._86):l(b.promise,a._86));var d=f(c,a._86);d===r?l(b.promise,q):k(b.promise,d)})}function k(a,b){if(b===a)return l(a,new TypeError("A promise cannot be resolved with itself."));if(b&&("object"==typeof b||"function"==typeof b)){var c=e(b);if(c===r)return l(a,q);if(c===a.then&&b instanceof h)return a._41=3,a._86=b,void m(a);if("function"==typeof c)return void o(c.bind(b),a)}a._41=1,a._86=b,m(a)}function l(a,b){a._41=2,a._86=b,m(a)}function m(a){for(var b=0;b<a._17.length;b++)j(a,a._17[b]);a._17=null}function n(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function o(a,b){var c=!1,d=g(a,function(a){c||(c=!0,k(b,a))},function(a){c||(c=!0,l(b,a))});c||d!==r||(c=!0,l(b,q))}var p=a("asap/raw"),q=null,r={};b.exports=h,h._1=d,h.prototype.then=function(a,b){if(this.constructor!==h)return i(this,a,b);var c=new h(d);return j(this,new n(a,b,c)),c}},{"asap/raw":40}],33:[function(a,b,c){"use strict";var d=a("./core.js");b.exports=d,d.prototype.done=function(a,b){var c=arguments.length?this.then.apply(this,arguments):this;c.then(null,function(a){setTimeout(function(){throw a},0)})}},{"./core.js":32}],34:[function(a,b,c){"use strict";function d(a){var b=new e(e._1);return b._41=1,b._86=a,b}var e=a("./core.js");a("asap/raw");b.exports=e;var f=d(!0),g=d(!1),h=d(null),i=d(void 0),j=d(0),k=d("");e.resolve=function(a){if(a instanceof e)return a;if(null===a)return h;if(void 0===a)return i;if(a===!0)return f;if(a===!1)return g;if(0===a)return j;if(""===a)return k;if("object"==typeof a||"function"==typeof a)try{var b=a.then;if("function"==typeof b)return new e(b.bind(a))}catch(c){return new e(function(a,b){b(c)})}return d(a)},e.all=function(a){var b=Array.prototype.slice.call(a);return new e(function(a,c){function d(g,h){if(h&&("object"==typeof h||"function"==typeof h)){if(h instanceof e&&h.then===e.prototype.then){for(;3===h._41;)h=h._86;return 1===h._41?d(g,h._86):(2===h._41&&c(h._86),void h.then(function(a){d(g,a)},c))}var i=h.then;if("function"==typeof i){var j=new e(i.bind(h));return void j.then(function(a){d(g,a)},c)}}b[g]=h,0===--f&&a(b)}if(0===b.length)return a([]);for(var f=b.length,g=0;g<b.length;g++)d(g,b[g])})},e.reject=function(a){return new e(function(b,c){c(a)})},e.race=function(a){return new e(function(b,c){a.forEach(function(a){e.resolve(a).then(b,c)})})},e.prototype["catch"]=function(a){return this.then(null,a)}},{"./core.js":32,"asap/raw":40}],35:[function(a,b,c){"use strict";var d=a("./core.js");b.exports=d,d.prototype["finally"]=function(a){return this.then(function(b){return d.resolve(a()).then(function(){return b})},function(b){return d.resolve(a()).then(function(){throw b})})}},{"./core.js":32}],36:[function(a,b,c){"use strict";b.exports=a("./core.js"),a("./done.js"),a("./finally.js"),a("./es6-extensions.js"),a("./node-extensions.js")},{"./core.js":32,"./done.js":33,"./es6-extensions.js":34,"./finally.js":35,"./node-extensions.js":37
}],37:[function(a,b,c){"use strict";var d=a("./core.js"),e=a("asap");b.exports=d,d.denodeify=function(a,b){return b=b||1/0,function(){var c=this,e=Array.prototype.slice.call(arguments);return new d(function(d,f){for(;e.length&&e.length>b;)e.pop();e.push(function(a,b){a?f(a):d(b)});var g=a.apply(c,e);!g||"object"!=typeof g&&"function"!=typeof g||"function"!=typeof g.then||d(g)})}},d.nodeify=function(a){return function(){var b=Array.prototype.slice.call(arguments),c="function"==typeof b[b.length-1]?b.pop():null,f=this;try{return a.apply(this,arguments).nodeify(c,f)}catch(g){if(null===c||"undefined"==typeof c)return new d(function(a,b){b(g)});e(function(){c.call(f,g)})}}},d.prototype.nodeify=function(a,b){return"function"!=typeof a?this:void this.then(function(c){e(function(){a.call(b,null,c)})},function(c){e(function(){a.call(b,c)})})}},{"./core.js":32,asap:38}],38:[function(a,b,c){"use strict";function d(){if(i.length)throw i.shift()}function e(a){var b;b=h.length?h.pop():new f,b.task=a,g(b)}function f(){this.task=null}var g=a("./raw"),h=[],i=[],j=g.makeRequestCallFromTimer(d);b.exports=e,f.prototype.call=function(){try{this.task.call()}catch(a){e.onerror?e.onerror(a):(i.push(a),j())}finally{this.task=null,h[h.length]=this}}},{"./raw":39}],39:[function(a,b,c){(function(a){"use strict";function c(a){h.length||(g(),i=!0),h[h.length]=a}function d(){for(;j<h.length;){var a=j;if(j+=1,h[a].call(),j>k){for(var b=0,c=h.length-j;c>b;b++)h[b]=h[b+j];h.length-=j,j=0}}h.length=0,j=0,i=!1}function e(a){var b=1,c=new l(a),d=document.createTextNode("");return c.observe(d,{characterData:!0}),function(){b=-b,d.data=b}}function f(a){return function(){function b(){clearTimeout(c),clearInterval(d),a()}var c=setTimeout(b,0),d=setInterval(b,50)}}b.exports=c;var g,h=[],i=!1,j=0,k=1024,l=a.MutationObserver||a.WebKitMutationObserver;g="function"==typeof l?e(d):f(d),c.requestFlush=g,c.makeRequestCallFromTimer=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(a,b,c){(function(c){"use strict";function d(a){i.length||(f(),j=!0),i[i.length]=a}function e(){for(;k<i.length;){var a=k;if(k+=1,i[a].call(),k>l){for(var b=0,c=i.length-k;c>b;b++)i[b]=i[b+k];i.length-=k,k=0}}i.length=0,k=0,j=!1}function f(){var b=c.domain;b&&(g||(g=a("domain")),g.active=c.domain=null),j&&h?setImmediate(e):c.nextTick(e),b&&(g.active=c.domain=b)}var g,h="function"==typeof setImmediate;b.exports=d;var i=[],j=!1,k=0,l=1024;d.requestFlush=f}).call(this,a("_process"))},{_process:15,domain:11}],41:[function(a,b,c){var d=a("rtcstream"),e=a("promise"),f=a("util"),g=a("events").EventEmitter,h=a("rtc-quickconnect"),i=function(a,b,c){this.name=a,this.signalUrl=b,this.rtcOptions=c,this.streams=[],this.peers=[],g.call(this)};f.inherits(i,g),b.exports=i,i.prototype.receiveData=function(a){console.log("not implemented")},i.prototype.replicate=function(){console.log("not implemented")},i.prototype.removePeer=function(a){var b=this.peers.indexOf(a);b>=0&&(this.peers.splice(b,1),this.streams.splice(b,1))},i.prototype.join=function(a){a="undefined"!=typeof a?a:0;var b=this,c=new e(function(c,d){b.signaller=h(b.signalUrl,b.rtcOptions),b.signaller.createDataChannel(b.rtcOptions.room).on("channel:opened:"+b.rtcOptions.room,function(d,e){b.addPeer(d,e),b.peers.length>=a&&c()}).on("channel:closed:"+b.rtcOptions.room,function(a,c){b.removePeer(a)})});return c},i.prototype.addPeer=function(a,b){var c=new d(this.name+":"+a,b);this.peers.push(a),this.streams.push(c),c.on("data",this.receiveData.bind(this))},i.prototype.close=function(){this.signaller.close()},i.prototype.getPeers=function(){return this.peers}},{events:12,promise:31,"rtc-quickconnect":42,rtcstream:103,util:30}],42:[function(a,b,c){"use strict";var d=a("rtc-tools"),e=a("mbus"),f=a("rtc-core/plugin"),g=d.logger("rtc-quickconnect"),h=a("cog/extend");b.exports=function(b,c){function i(){clearTimeout(H),A||y&&(!F||r)&&q&&(G&&B.length<G||(H=setTimeout(function(){var a=h({room:w},z);t.announce(a),A=!0},0)))}function j(a){var b,f,i=u(a);i.room===w&&(C.end(a),b=d.createConnection(h({},c,{iceServers:q}),(c||{}).constraints),t("peer:connect",i.id,b,i),C.create(i.id,b),B.forEach(function(a){b.addStream(a)}),t.isMaster(i.id)?(g("is master, creating data channels: ",Object.keys(D)),Object.keys(D).forEach(function(a){l(b.createDataChannel(a,D[a]),b,i)})):b.ondatachannel=function(c){var d=c&&c.channel;d&&void 0!==D[d.label]&&l(d,b,u(a))},g("coupling "+t.id+" to "+i.id),f=d.couple(b,a,t,h({},c,{logger:e("pc."+a,t)})),t("peer:couple",a,b,i,f),f.once("connected",C.start.bind(null,a,b,i)),f.once("closed",C.end.bind(null,a)),t.isMaster(a)&&f.createOffer())}function k(a){var b=C.get(a);if(!b)throw new Error("No active call for peer: "+a);return b}function l(a,b,c){function d(){var d=C.get(c.id),f=[c.id,a,c,b];g('reporting channel "'+a.label+'" ready, have call: '+!!d),clearInterval(e),a.onopen=null,d&&d.channels.set(a.label,a),g("triggering channel:opened events for channel: "+a.label),t.apply(t,["channel:opened"].concat(f)),t.apply(t,["channel:opened:"+a.label].concat(f))}var e;return g("channel "+a.label+" discovered for peer: "+c.id),"open"===a.readyState?d():(g("channel not ready, current state = "+a.readyState),a.onopen=d,void(e=setInterval(function(){g("checking channel state, current state = "+a.readyState),"open"===a.readyState&&d()},500)))}function m(){return F&&F.init(c,function(a){return a?console.error("Could not initialize plugin: ",a):(r=!0,void i())})}function n(a){a&&"undefined"!=typeof a.room&&(w=a.room)}function o(a,b){b.allow=b.allow&&B.length>=G}function p(a){var b=a&&a.id,c=b&&C.get(b);return b&&!c?(g("received peer update from peer "+b+", no active calls"),t.to(b).send("/reconnect"),j(b)):void 0}var q,r,s="undefined"!=typeof location&&location.hash.slice(1),t=a("rtc-pluggable-signaller")(h({signaller:b,endpoints:["/","/primus"]},c)),u=a("./lib/getpeerdata")(t.peers),v=(c||{}).ns||"",w=(c||{}).room,x=(c||{}).debug,y=!(c||{}).manualJoin,z={},A=!1,B=[],C=t.calls=a("./lib/calls")(t,c),D={},E=t.plugins=(c||{}).plugins||[],F=f(E),G=parseInt((c||{}).expectedLocalStreams,10)||0,H=0,I=0;return w||("undefined"==typeof location||s||(s=location.hash=""+Math.pow(2,53)*Math.random()),w=v+"#"+s),x&&d.logger.enable.apply(d.logger,Array.isArray(g)?x:["*"]),t.on("peer:announce",function(a){j(a.id)}),t.on("peer:update",p),t.on("message:reconnect",function(a){j(a.id)}),t.broadcast=t.addStream=function(a){return B.push(a),C.values().forEach(function(b){b.pc.addStream(a)}),i(),t},t.endCalls=function(){C.keys().forEach(C.end)},t.close=function(){t.endCalls(),t.leave()},t.createDataChannel=function(a,b){return C.keys().forEach(function(c){var d,e=C.get(c);e&&e.pc&&t.isMaster(c)&&(d=e.pc.createDataChannel(a,b),l(d,e.pc,u(c)))}),D[a]=b||null,t},t.join=function(){y=!0,i()},t.get=function(a){return z[a]},t.getLocalStreams=function(){return[].concat(B)},t.reactive=function(){return c=c||{},c.reactive=!0,t},t.removeStream=function(a){var b=B.indexOf(a);return C.values().forEach(function(b){b.pc.removeStream(a)}),b>=0&&B.splice(b,1),t},t.requestChannel=function(a,b,c){var d=k(a),e=d&&d.channels.get(b);return e?(c(null,e),t):(t.once("channel:opened:"+b,function(a,b){c(null,b)}),t)},t.requestStream=function(a,b,c){function d(g){g===a&&(e=f.pc.getRemoteStreams()[b],e&&(t.removeListener("stream:added",d),c(null,e)))}var e,f=k(a);return(e=f.pc.getRemoteStreams()[b])?(c(null,e),t):(t.on("stream:added",d),t)},t.profile=function(a){return h(z,a),A&&(clearTimeout(I),I=setTimeout(function(){t.announce(z)},(c||{}).updateDelay||1e3)),t},t.waitForCall=function(a,b){var c=C.get(a);return c&&c.active?(b(null,c.pc),t):void t.on("call:started",function d(c){c===a&&(t.removeListener("call:started",d),b(null,C.get(c).pc))})},G&&t.on("peer:filter",o),t.on("local:announce",n),t.on("message:ping",C.ping),a("rtc-core/genice")(c,function(a,b){return a?console.error("could not find iceServers: ",a):(q=b,void i())}),F&&m(),t}},{"./lib/calls":43,"./lib/getpeerdata":44,"cog/extend":47,mbus:52,"rtc-core/genice":54,"rtc-core/plugin":56,"rtc-pluggable-signaller":57,"rtc-tools":89}],43:[function(a,b,c){(function(c){var d=a("rtc-tools"),e=d.logger("rtc-quickconnect"),f=a("rtc-tools/cleanup"),g=a("cog/getable");b.exports=function(b,d){function h(a,b){r.set(a,{active:!1,pc:b,channels:g({}),streams:[],lastping:Date.now()})}function i(a){return function(b){e("peer "+a+" added stream"),p(a),m(a)(b.stream)}}function j(a){return function(c){e("peer "+a+" removed stream"),p(a),b("stream:removed",a,c.stream)}}function k(a){var c=r.get(a);c&&(c.channels.keys().forEach(function(d){var e=c.channels.get(d),f=[a,e,d];b.apply(b,["channel:closed"].concat(f)),b.apply(b,["channel:closed:"+d].concat(f)),e.onopen=null}),c.streams.forEach(function(c){b("stream:removed",a,c)}),r["delete"](a),0===r.keys().length&&n(),b("call:ended",a,c.pc),f(c.pc))}function l(a){var b=r.get(a&&a.id);b&&(b.lastping=Date.now())}function m(a){return function(c){b("stream:added",a,c,s(a))}}function n(){clearInterval(q),q=0}function o(f,g,h){var k=r.get(f),l=[].concat(g.getRemoteStreams());k.active=!0,k.streams=[].concat(g.getRemoteStreams()),g.onaddstream=i(f),g.onremovestream=j(f),e(b.id+" - "+f+" call start: "+l.length+" streams"),b("call:started",f,g,h),q=q||a("./heartbeat")(b,r,d),c.nextTick(function(){l.forEach(m(f))})}function p(a){var b=r.get(a);b&&b.pc&&(b.streams=[].concat(b.pc.getRemoteStreams()))}var q,r=g({}),s=a("./getpeerdata")(b.peers);return r.create=h,r.end=k,r.ping=l,r.start=o,r}}).call(this,a("_process"))},{"./getpeerdata":44,"./heartbeat":45,_process:15,"cog/getable":48,"rtc-tools":89,"rtc-tools/cleanup":85}],44:[function(a,b,c){b.exports=function(a){return function(b){var c=a.get(b);return c&&c.data}}},{}],45:[function(a,b,c){b.exports=function(a,b,c){function d(){var c=Date.now()-4*e;b.keys().forEach(function(d){var e=b.get(d);return e.lastping<c?b.end(d):void a.to(d).send("/ping")})}var e=(c||{}).heartbeat||2500;return e?setInterval(d,e):void 0}},{}],46:[function(a,b,c){"use strict";b.exports=function(a){return a=a||{},[].slice.call(arguments,1).forEach(function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a}},{}],47:[function(a,b,c){"use strict";b.exports=function(a){return[].slice.call(arguments,1).forEach(function(b){if(b)for(var c in b)a[c]=b[c]}),a}},{}],48:[function(a,b,c){b.exports=function(a){function b(b){return a[b]}function c(b,c){a[b]=c}function d(b){return delete a[b]}function e(){return Object.keys(a)}function f(){return Object.keys(a).map(function(b){return a[b]})}return"object"!=typeof a?a:{get:b,set:c,remove:d,"delete":d,keys:e,values:f}}},{}],49:[function(a,b,c){"use strict";b.exports=function(a){var b,c,d,e="string"==typeof a||a instanceof String,f=/^\-?\d+\.?\d*$/;if(!e||a.length<2)return e&&f.test(a)?parseFloat(a):a;if("true"===a||"false"===a)return"true"===a;if("null"===a)return null;if(c=a.charAt(0),d=a.charAt(a.length-1),b="{"==c&&"}"==d||"["==c&&"]"==d||'"'==c&&'"'==d)try{return JSON.parse(a)}catch(g){}return f.test(a)?parseFloat(a):a}},{}],50:[function(a,b,c){"use strict";var d=[],e=[],f=[console],g=b.exports=function(a){function b(){return c=d.indexOf("*")>=0||d.indexOf(a)>=0}var c=b();return e[e.length]=b,function(){var b=[].slice.call(arguments);("string"==typeof b[0]||b[0]instanceof String)&&(b[0]=a+": "+b[0]),c&&f.forEach(function(a){a.log.apply(a,b)})}};g.reset=function(){return f=[],d=[],g.enable()},g.to=function(a){return f=f.concat(a||[]),g},g.enable=function(){return d=d.concat([].slice.call(arguments)),e.forEach(function(a){a()}),g}},{}],51:[function(a,b,c){"use strict";b.exports=function(a,b,c){function d(){a.apply(g,f||[]),h=Date.now()}var e,f,g,h=(c||{}).leading!==!1?0:Date.now(),i=(c||{}).trailing;return i=i||void 0===i,function(){var c=Date.now(),j=c-h;return clearTimeout(e),b>j?(f=[].slice.call(arguments,0),g=this,i&&(e=setTimeout(d,b-j))):(h=c,void a.apply(this,arguments))}}},{}],52:[function(a,b,c){var d=/[\.\:]/,e=b.exports=function(a,b,c){function f(b){var d,e=[].slice.call(arguments,1),g=i(b),h=m[g]||[];return n.forEach(function(a){a({name:g,args:e})}),d=[].concat(h).map(function(a){return a.apply(c||this,e)}),f.parent&&(d=d.concat(f.parent.apply(c||this,[(a?a+".":"")+g].concat(e)))),d}function g(a){a?delete m[i(a)]:m={}}function h(a){function b(){n.splice(n.indexOf(a),1)}return n.push(a),b}function i(a){return(Array.isArray(a)?a:a.split(d)).join(".")}function j(a,b){var c=m[i(a)]||[],d=c?c.indexOf(b._actual||b):-1;d>=0&&c.splice(d,1)}function k(a,b){var c;return a=i(a),c=m[a],c?c.push(b):m[a]=[b],f}function l(a,b){function c(){var d=b.apply(this,arguments);return f.off(a,c),d}return b._actual=c,k(a,c)}var m={},n=[];return"function"==typeof a&&(b=a,a=""),a=i(a||""),f.clear=f.removeAllListeners=g,f.feed=h,f.on=f.addListener=k,f.once=l,f.off=f.removeListener=j,f.parent=b||a&&e(),f}},{}],53:[function(a,b,c){"use strict";var d=a("detect-browser"),e=b.exports=function(a,b){var c,d,f,g=(b||{}).attach,h=this||("undefined"!=typeof window?window:void 0),i=((b||{}).prefixes||["ms","o","moz","webkit"]).concat("");if(h)for(c=i.length;c--;)if(d=i[c],f=d+(d?a.charAt(0).toUpperCase()+a.slice(1):a),"undefined"!=typeof h[f])return e.browser=e.browser||d.toLowerCase(),g&&(h[a]=h[f]),h[f]};e.moz="undefined"!=typeof navigator&&!!navigator.mozGetUserMedia,e.browser=d.name,e.browserVersion=e.version=d.version},{"detect-browser":55}],54:[function(a,b,c){b.exports=function(a,b){var c=(a||{}).ice,d=(a||{}).iceServers;return"function"==typeof c?c(a,b):Array.isArray(c)?b(null,[].concat(c)):void b(null,[].concat(d||[]))}},{}],55:[function(a,b,c){function d(a){return a.concat(a[1].exec(navigator.userAgent))}function e(a){return!!a[2]}for(var f=[["chrome",/Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/iPad\;\sCPU\sOS\s([0-9\._]+)/],["ios",/iPhone\;\sCPU\siPhone\sOS\s([0-9\._]+)/],["safari",/Safari\/([0-9\._]+)/]],d=f.map(d).filter(e)[0],g=d&&d[3].split(/[._]/).slice(0,3);g&&g.length<3;)g.push("0");c.name=d&&d[0],c.version=g&&g.join(".")},{}],56:[function(a,b,c){function d(a){return a&&"function"==typeof a.supported&&a.supported(f)}function e(a){var b=g.filter(function(b){return"function"==typeof a[b]});return b.length===g.length}var f=a("./detect"),g=["init"];b.exports=function(a){return[].concat(a||[]).filter(d).filter(e)[0]}},{"./detect":53}],57:[function(a,b,c){b.exports=function(b){var c=(b||{}).signaller,d=(b||{}).messenger||a("rtc-switchboard-messenger");return"string"==typeof c||c instanceof String?a("rtc-signaller")(d(c,b),b):c}},{"rtc-signaller":58,"rtc-switchboard-messenger":76}],58:[function(a,b,c){"use strict";var d=(a("rtc-core/detect"),a("cog/extend"),a("mbus"),a("cog/getable"),a("cuid"),a("pull-stream")),e=(a("pull-pushable"),a("rtc-signal/prepare"),a("pull-pushable")),f=0,g=1,h=2,i={version:"6.2.1"};b.exports=function(b,c){function j(a){n.push(a),s!==f||void 0!==l&&!l||t()}function k(){(void 0===m||m)&&setTimeout(t,50)}var l=(c||{}).autoconnect,m=(c||{}).reconnect,n=e(),o=0,p=a("rtc-signal/signaller")(c,j),q=!1,r=0,s=f,t=p.connect=function(){s!==g&&(s=g,b(function(a,b,c){return a?(s=f,p("error",a)):(o+=1,s=h,d(b,d.through(null,function(){n=e(),s=f,p("disconnected")}),d.drain(p._process)),d(n,c),p.removeListener("disconnected",k),p.on("disconnected",k),p("connected"),void(q&&o>1&&p._announce()))}))};return p.announce=function(a){return q=!0,p._update(a),clearTimeout(r),r=setTimeout(p._announce,(c||{}).announceDelay||10)},p.leave=p.close=function(){p.send("/leave",{id:p.id}),p.removeListener("disconnected",k),p.removeListener("connected",p._announce),n.end(),s=f},p._update({agent:"signaller@"+i.version}),(void 0===l||l)&&t(),p}},{"cog/extend":47,"cog/getable":48,cuid:2,mbus:52,"pull-pushable":59,"pull-stream":66,"rtc-core/detect":53,"rtc-signal/prepare":73,"rtc-signal/signaller":75}],59:[function(a,b,c){var d=a("pull-stream");b.exports=d.Source(function(a){function b(){for(var a;g.length&&((a=e.length)||d);){var b=e.shift(),c=f.shift();g.shift()(a?null:d,b),c&&c(d===!0?null:d)}}function c(c,e){d=d||c,g.push(e),b(),d&&a&&a(d===!0?null:d)}var d,e=[],f=[],g=[];return c.push=function(a,c){return d?c&&c(d===!0?null:d):(e.push(a),f.push(c),void b())},c.end=function(c,e){"function"==typeof c&&(e=c,c=!0),d=d||c||!0,e&&f.push(e),b(),d&&a&&a(d===!0?null:d)},c})},{"pull-stream":60}],60:[function(a,b,c){var d=a("./sources"),e=a("./sinks"),f=a("./throughs"),g=a("pull-core");for(var h in d)c[h]=g.Source(d[h]);for(var h in f)c[h]=g.Through(f[h]);for(var h in e)c[h]=g.Sink(e[h]);var i=a("./maybe")(c);for(var h in i)c[h]=i[h];c.Duplex=c.Through=c.pipeable=g.Through,c.Source=c.pipeableSource=g.Source,c.Sink=c.pipeableSink=g.Sink},{"./maybe":61,"./sinks":63,"./sources":64,"./throughs":65,"pull-core":62}],61:[function(a,b,c){var d=a("pull-core"),e=d.prop,f=d.id,g=d.maybeSink;b.exports=function(a){var b={},c=a.drain,d=(b.find=function(a,b){return g(function(b){var d=!1;return b?a=e(a)||f:(b=a,a=f),c(function(c){return a(c)?(d=!0,b(null,c),!1):void 0},function(a){d||b(a===!0?null:a,null)})},b)},b.reduce=function(a,b,d){return g(function(d){return c(function(c){b=a(b,c)},function(a){d(a,b)})},d)});b.collect=b.writeArray=function(a){return d(function(a,b){return a.push(b),a},[],a)};return b}},{"pull-core":62}],62:[function(a,b,c){function d(a){return"function"!=typeof a?a:(a.pipe=a.pipe||function(b){if("function"!=typeof b)throw new Error("must pipe to reader");return d(b(a))},a.type="Source",a)}c.id=function(a){return a},c.prop=function(a){if("string"==typeof a){var b=a;return function(a){return a[b]}}return a},c.tester=function(a){return a?"object"==typeof a&&"function"==typeof a.test?a.test.bind(a):c.prop(a)||c.id:c.id},c.addPipe=d;var e=(c.Source=function(a){function b(){var b=[].slice.call(arguments);return d(a.apply(null,b))}return b.type="Source",b},c.Through=function(a){return function(){function b(b){for(c.unshift(b),b=a.apply(null,c);d.length;)b=d.shift()(b);return b}var c=[].slice.call(arguments),d=[];return b.pipe=function(a){if(d.push(a),"Source"===a.type)throw new Error("cannot pipe "+b.type+" to Source");return b.type="Sink"===a.type?"Sink":"Through",b},b.type="Through",b}}),f=c.Sink=function(a){return function(){function b(b){return c.unshift(b),a.apply(null,c)}var c=[].slice.call(arguments);if(!a)throw new Error("must be createReader function");return b.type="Sink",b}};c.maybeSink=c.maybeDrain=function(a,b){return b?f(function(c){return a(b)(c)})():e(function(b){var c;return function(d,e){return d?b(d,e):c?e(c):void a(function(a,b){c=a||!0,a?e(c):e(null,b)})(b)}})()}},{}],63:[function(a,b,c){var d=c.drain=function(a,b,c){!function d(){for(var e=!0,f=!1;e;)if(f=!1,a(null,function(g,h){f=!0,g?(e=!1,c&&c(g===!0?null:g)):b&&!1===b(h)?(e=!1,a(!0,c||function(){})):e||d()}),!f)return void(e=!1)}()};c.onEnd=function(a,b){return d(a,null,b)},c.log=function(a,b){return d(a,function(a){console.log(a)},b)}},{}],64:[function(a,b,c){var d=(c.keys=function(a){return e(Object.keys(a))},c.once=function(a){return function(b,c){if(b)return c(b);if(null!=a){var d=a;a=null,c(null,d)}else c(!0)}}),e=c.values=c.readArray=function(a){Array.isArray(a)||(a=Object.keys(a).map(function(b){return a[b]}));var b=0;return function(c,d){return c?d&&d(c):void d(b>=a.length||null,a[b++])}};c.count=function(a){var b=0;return a=a||1/0,function(c,d){return c?d&&d(c):b>a?d(!0):void d(null,b++)}},c.infinite=function(a){return a=a||Math.random,function(b,c){return b?c&&c(b):c(null,a())}},c.defer=function(){var a,b,c=[],d=function(d,e){a?a(d,e):(b=d,c.push(e))};return d.resolve=function(d){if(a)throw new Error("already resolved");if(a=d,!a)throw new Error("no read cannot resolve!"+a);for(;c.length;)a(b,c.shift())},d.abort=function(a){d.resolve(function(b,c){c(a||!0)})},d},c.empty=function(){return function(a,b){b(!0)}},c.depthFirst=function(a,b){var c=[];return c.unshift(d(a)),function e(a,d){return c.length?void c[0](a,function(a,f){return a?(c.shift(),e(null,d)):(c.unshift(b(f)),void d(a,f))}):d(!0)}},c.widthFirst=function(a,b){var c=[];return c.push(d(a)),function e(a,d){return c.length?void c[0](a,function(a,f){return a?(c.shift(),e(null,d)):(c.push(b(f)),void d(a,f))}):d(!0)}},c.leafFirst=function(a,b){var c=[],e=[];return c.push(d(a)),function f(a,d){c[0](a,function(a,g){return a?(c.shift(),e.length?d(null,e.shift()):d(!0)):(c.unshift(b(g)),e.unshift(g),void f(null,d))})}}},{}],65:[function(a,b,c){(function(b){var d=a("pull-core"),e=a("./sources"),f=a("./sinks"),g=d.prop,h=d.id,i=d.tester,j=(c.map=function(a,b){return b=g(b)||h,function(c,d){a(c,function(a,c){var c=a?null:b(c);d(a,c)})}},c.asyncMap=function(a,b){return b?function(c,d){return c?a(c,d):void a(null,function(a,c){return a?d(a,c):void b(c,d)})}:a},c.paraMap=function(a,b,c){function d(){if(f){var a=f;return f=null,h.length?a(null,h.shift()):g&&!i?a(g):void(f=a)}}function e(){a(null,function(a,f){return a?(g=a,d()):(i++,b(f,function(a,b){i--,h.push(b),d()}),void(c>i&&!g&&e()))})}if(!b)return a;var f,g=!1,h=[],i=0;return function(b,c){return b?a(b,c):(f=c,void(h.length||g?(e(),d()):e()))}},c.filter=function(a,b){return b=i(b),function c(d,e){a(d,function(a,d){return a||b(d)?void e(a,d):c(a,e)})}}),k=(c.filterNot=function(a,b){return b=i(b),j(a,function(a){return!b(a)})},c.through=function(a,b,c){function d(a){!e&&c&&(e=!0,c(a===!0?null:a))}var e=!1;return function(c,e){return c&&d(c),a(c,function(a,c){a?d(a):b&&b(c),e(a,c)})}},c.take=function(a,b){var c=!1;if("number"==typeof b){var d=b;b=function(){return d--}}return function(d,e){return c?e(c):(c=d)?a(c,e):void a(null,function(d,f){return(c=c||d)?e(c):void(b(f)?e(null,f):(c=!0,a(!0,function(a,b){e(c,b)})))})}},c.unique=function(a,b,c){b=g(b)||h;var d={};return j(a,function(a){var e=b(a);return d[e]?!!c:(d[e]=!0,!c)})}),l=(c.nonUnique=function(a,b){return k(a,b,!0)},c.group=function(a,b){var c;b=b||5;var d=[];return function(e,f){return e?a(c=e,f):c?f(c):void a(null,function g(e,h){if(c=c||e){if(!d.length)return f(c);var i=d;return d=[],f(null,i)}if(d.push(h),d.length<b)return a(null,g);var i=d;d=[],f(null,i)})}},c.flatten=function(a){var b;return function(c,d){function f(){b(null,function(a,b){a?g():d(null,b)})}function g(){a(null,function(a,c){if(a)return d(a);if(Array.isArray(c))c=e.values(c);else if("function"!=typeof c)throw new Error("expected stream of streams");b=c,f()})}b?f():g()}},c.prepend=function(a,b){return function(c,d){if(null!==b){if(c)return a(c,d);var e=b;b=null,d(null,e)}else a(c,d)}},c._reduce=function(a,b,c){return function(d,e){return d?a(d,e):ended?e(ended):void f.drain(function(a){c=b(c,a)},function(a,b){ended=a||!0,a?e(ended):e(null,c)})(a)}},b.nextTick);c.highWaterMark=function(a,b){function c(){for(;g.length&&(f.length||e);)g.shift()(e,e?null:f.shift())}function d(){return e||h||f.length>=b?void 0:(h=!0,a(e,function(a,b){h=!1,e=e||a,null!=b&&f.push(b),d(),c()}))}var e,f=[],g=[],h=!1;return b=b||10,l(d),function(a,b){e=e||a,g.push(b),d(),c()}}}).call(this,a("_process"))},{"./sinks":63,"./sources":64,_process:15,"pull-core":62}],66:[function(a,b,c){function d(a){return"function"==typeof a}function e(a){return a&&("Through"===a.type||1===a.length)}var f=a("./sources"),g=a("./sinks"),h=a("./throughs"),i=a("pull-core"),c=b.exports=function l(){function a(){var c=b.shift();return null==c?a():d(c)?c:function(a){return c.sink(a),c.source}}var b=[].slice.call(arguments);if(e(b[0]))return function(a){return b.unshift(a),l.apply(null,b)};var c=b.shift();for(d(c.source)&&(c=c.source);b.length;)c=a()(c);return c};for(var j in f)c[j]=i.Source(f[j]);for(var j in h)c[j]=i.Through(h[j]);for(var j in g)c[j]=i.Sink(g[j]);var k=a("./maybe")(c);for(var j in k)c[j]=k[j];c.Duplex=c.Through=c.pipeable=i.Through,c.Source=c.pipeableSource=i.Source,c.Sink=c.pipeableSink=i.Sink},{"./maybe":67,"./sinks":69,"./sources":70,"./throughs":71,"pull-core":68}],67:[function(a,b,c){var d=a("pull-core"),e=d.prop,f=d.id,g=d.maybeSink;b.exports=function(a){var b={},c=a.drain,d=(b.find=function(a,b){return g(function(b){var d=!1;return b?a=e(a)||f:(b=a,a=f),c(function(c){return a(c)?(d=!0,b(null,c),!1):void 0},function(a){d||b(a===!0?null:a,null)})},b)},b.reduce=function(a,b,d){return g(function(d){return c(function(c){b=a(b,c)},function(a){d(a,b)})},d)});b.collect=b.writeArray=function(a){return d(function(a,b){return a.push(b),a},[],a)},b.concat=function(a){return d(function(a,b){return a+b},"",a)};return b}},{"pull-core":68}],68:[function(a,b,c){function d(a){return"function"!=typeof a?a:(a.pipe=a.pipe||function(b){if("function"!=typeof b&&"function"!=typeof b.sink)throw new Error("must pipe to reader");var c=d(b.sink?b.sink(a):b(a));return b.source||c},a.type="Source",a)}c.id=function(a){return a},c.prop=function(a){if("string"==typeof a){var b=a;return function(a){return a[b]}}return a},c.tester=function(a){return a?"object"==typeof a&&"function"==typeof a.test?a.test.bind(a):c.prop(a)||c.id:c.id},c.addPipe=d;var e=(c.Source=function(a){function b(){var b=[].slice.call(arguments);return d(a.apply(null,b))}return b.type="Source",b},c.Through=function(a){return function(){function b(b){for(c.unshift(b),b=a.apply(null,c);d.length;)b=d.shift()(b);return b}var c=[].slice.call(arguments),d=[];return b.pipe=function(a){if(d.push(a),"Source"===a.type)throw new Error("cannot pipe "+b.type+" to Source");return b.type="Sink"===a.type?"Sink":"Through",b},b.type="Through",b}}),f=c.Sink=function(a){return function(){function b(b){return c.unshift(b),a.apply(null,c)}var c=[].slice.call(arguments);if(!a)throw new Error("must be createReader function");return b.type="Sink",b}};c.maybeSink=c.maybeDrain=function(a,b){return b?f(function(c){return a(b)(c)})():e(function(b){var c;return function(d,e){return d?b(d,e):c?e(c):void a(function(a,b){c=a||!0,a?e(c):e(null,b)})(b)}})()}},{}],69:[function(a,b,c){var d=c.drain=function(a,b,c){!function d(){for(var e=!0,f=!1;e;)if(f=!1,a(null,function(g,h){if(f=!0,g){if(e=!1,c)c(g===!0?null:g);else if(g&&g!==!0)throw g}else b&&!1===b(h)?(e=!1,a(!0,c||function(){})):e||d()}),!f)return void(e=!1)}()};c.onEnd=function(a,b){return d(a,null,b)},c.log=function(a,b){return d(a,function(a){console.log(a)},b)}},{}],70:[function(a,b,c){function d(a,b,c){a(b),c&&c(b===!0?null:b)}var e=(c.keys=function(a){return f(Object.keys(a))},c.once=function(a,b){return function(c,e){if(c)return d(e,c,b);if(null!=a){var f=a;a=null,e(null,f)}else e(!0)}}),f=c.values=c.readArray=function(a,b){if(!a)return function(a,c){return a?d(c,a,b):c(!0)};Array.isArray(a)||(a=Object.keys(a).map(function(b){return a[b]}));var c=0;return function(e,f){return e?d(f,e,b):void f(c>=a.length||null,a[c++])}};c.count=function(a){var b=0;return a=a||1/0,function(c,d){return c?d&&d(c):b>a?d(!0):void d(null,b++)}},c.infinite=function(a){return a=a||Math.random,function(b,c){return b?c&&c(b):c(null,a())}},c.defer=function(){var a,b,c=[],d=function(d,e){a?a(d,e):(b=d,c.push(e))};return d.resolve=function(d){if(a)throw new Error("already resolved");if(a=d,!a)throw new Error("no read cannot resolve!"+a);for(;c.length;)a(b,c.shift())},d.abort=function(a){d.resolve(function(b,c){c(a||!0)})},d},c.empty=function(){return function(a,b){b(!0)}},c.error=function(a){return function(b,c){c(a)}},c.depthFirst=function(a,b){var c=[];return c.unshift(e(a)),function d(a,e){return c.length?void c[0](a,function(a,f){return a?(c.shift(),d(null,e)):(c.unshift(b(f)),void e(a,f))}):e(!0)}},c.widthFirst=function(a,b){var c=[];return c.push(e(a)),function d(a,e){return c.length?void c[0](a,function(a,f){return a?(c.shift(),d(null,e)):(c.push(b(f)),void e(a,f))}):e(!0)}},c.leafFirst=function(a,b){var c=[],d=[];return c.push(e(a)),function f(a,e){c[0](a,function(a,g){return a?(c.shift(),d.length?e(null,d.shift()):e(!0)):(c.unshift(b(g)),d.unshift(g),void f(null,e))})}}},{}],71:[function(a,b,c){(function(b){var d=a("pull-core"),e=a("./sources"),f=a("./sinks"),g=d.prop,h=d.id,i=d.tester,j=(c.map=function(a,b){return b=g(b)||h,function(c,d){a(c,function(c,e){try{e=c?null:b(e)}catch(f){return a(f,function(){return d(f)})}d(c,e)})}},c.asyncMap=function(a,b){return b?function(c,d){return c?a(c,d):void a(null,function(a,c){return a?d(a,c):void b(c,d)})}:a},c.paraMap=function(a,b,c){function d(){if(f){var a=f;return f=null,h.length?a(null,h.shift()):g&&!i?a(g):void(f=a)}}function e(){a(null,function(a,f){return a?(g=a,d()):(i++,b(f,function(a,b){i--,h.push(b),d()}),void(c>i&&!g&&e()))})}if(!b)return a;var f,g=!1,h=[],i=0;return function(b,c){return b?a(b,c):(f=c,void(h.length||g?(e(),d()):e()))}},c.filter=function(a,b){return b=i(b),function c(d,e){for(var f,g=!0;g;)g=!1,f=!0,a(d,function(a,d){return a||b(d)?void e(a,d):f?g=!0:c(a,e)}),f=!1}}),k=(c.filterNot=function(a,b){return b=i(b),j(a,function(a){return!b(a)})},c.through=function(a,b,c){function d(a){!e&&c&&(e=!0,c(a===!0?null:a))}var e=!1;return function(c,e){return c&&d(c),a(c,function(a,c){a?d(a):b&&b(c),e(a,c)})}},c.take=function(a,b){var c=!1;if("number"==typeof b){var d=b;b=function(){return d--}}return function(d,e){return c?e(c):(c=d)?a(c,e):void a(null,function(d,f){return(c=c||d)?e(c):void(b(f)?e(null,f):(c=!0,a(!0,function(a,b){e(c,b)})))})}},c.unique=function(a,b,c){b=g(b)||h;var d={};return j(a,function(a){var e=b(a);return d[e]?!!c:(d[e]=!0,!c)})});c.nonUnique=function(a,b){return k(a,b,!0)},c.group=function(a,b){var c;b=b||5;var d=[];return function(e,f){return e?a(c=e,f):c?f(c):void a(null,function g(e,h){if(c=c||e){if(!d.length)return f(c);var i=d;return d=[],f(null,i)}if(d.push(h),d.length<b)return a(null,g);var i=d;d=[],f(null,i)})}},c.flatten=function(a){var b;return function(c,d){function f(){b(null,function(a,b){a?g():d(null,b)})}function g(){a(null,function(a,c){if(a)return d(a);if(Array.isArray(c)||c&&"object"==typeof c)c=e.values(c);else if("function"!=typeof c)throw new Error("expected stream of streams");b=c,f()})}b?f():g()}},c.prepend=function(a,b){return function(c,d){if(null!==b){if(c)return a(c,d);var e=b;b=null,d(null,e)}else a(c,d)}},c._reduce=function(a,b,c){return function(d,e){return d?a(d,e):ended?e(ended):void f.drain(function(a){c=b(c,a)},function(a,b){ended=a||!0,a?e(ended):e(null,c)})(a)}},b.nextTick,c.highWaterMark=function(a,c){function d(){for(;i.length&&(h.length||f);)i.shift()(f,f?null:h.shift());!h.length&&g&&(f=g)}function e(){return f||g||j||h.length>=c?void 0:(j=!0,a(f||g,function(a,b){j=!1,g=g||a,null!=b&&h.push(b),e(),d()}))}var f,g,h=[],i=[],j=!1;return c=c||10,b.nextTick(e),function(a,b){f=f||a,i.push(b),e(),d()}},c.flatMap=function(a,b){b=b||h;var c,d=[];return function(e,f){return d.length?f(null,d.shift()):c?f(c):void a(e,function g(e,h){if(e)c=e;else for(var i=b(h);i&&i.length;)d.push(i.shift());d.length?f(null,d.shift()):c?f(c):a(null,g)})}}}).call(this,a("_process"))},{"./sinks":69,"./sources":70,_process:15,"pull-core":68}],72:[function(a,b,c){var d=a("cog/extend");b.exports=function(a){function b(b){var c=d({allow:!0},b);return a("peer:filter",b.id,c),c.allow}return function(c,e,f,g,h){var i,j=c[0];if(j&&j.id&&j.id!==a.id){if(!b(j))return;return i=a.peers.get(j.id),a("peer:connected",j.id,j),i?(d(i.data,j),a("peer:update",j,f)):(i={id:j.id,roleIdx:[j.id,a.id].sort().indexOf(j.id),data:{}},d(i.data,j),a.peers.set(j.id,i),a.autoreply&&!h&&a.to(j.id).send("/announce",a.attributes),a("peer:announce",j,i))}}}},{"cog/extend":47}],73:[function(a,b,c){function d(a){return"object"!=typeof a||a instanceof String?"function"==typeof a?null:a:JSON.stringify(a)}b.exports=function(a){return a.map(d).join("|")}},{}],74:[function(a,b,c){var d=a("cog/jsonparse");b.exports=function(b,c){function e(a,c,e){var f="message:"+a[0].slice(1),g=a.slice(2).map(d);b.apply(b,[f].concat(g).concat([c,e]))}var f={announce:a("./handlers/announce")(b,c)};return function(a){var c,g,h,i,j=a,k=!0,l=!1;if(!j||"primus"!==j.slice(0,6)){
var m=b.id+"";if("/to"===j.slice(0,3)&&(k=j.slice(4,m.length+4)===m,k&&(c=j.slice(5+m.length).split("|").map(d),l=!0,c=c.map(d))),k&&(b("rawdata",j),c=c||j.split("|").map(d),"string"==typeof c[0])){if(h=c[1],h===b.id)return console.warn("got data from ourself, discarding");i=b.peers.get(h)||h,"/"===c[0].charAt(0)?(g=f[c[0].slice(1)],"function"==typeof g?g(c.slice(2),c[0].slice(1),h,i,l):e(c,i,a)):b("data",c.slice(0,1).concat(c.slice(2)),h,i,l)}}}}},{"./handlers/announce":72,"cog/jsonparse":49}],75:[function(a,b,c){var d=a("rtc-core/detect"),e=a("cog/extend"),f=a("cog/getable"),g=a("cuid"),h=a("mbus"),i=a("./prepare");b.exports=function(b,c){function j(a){return function(){var b=a.concat([].slice.call(arguments));b.splice(3,0,l.id),c(i(b))}}var k=(b||{}).autoreply,l=h("",(b||{}).logger),m=l.peers=f({}),n=l.attributes={browser:d.browser,browserVersion:d.browserVersion,agent:"unknown"};return l.id=(b||{}).id||g(),l.isMaster=function(a){var b=m.get(a);return b&&0!==b.roleIdx},l.send=function(){var a=[].slice.call(arguments);a.splice(1,0,l.id),c(i(a))},l.to=function(a){return{send:j(["/to",a])}},l._announce=function(){l.send("/announce",n),l("local:announce",n)},l._process=a("./process")(l),l._update=function(a){e(n,a,{id:l.id})},l.autoreply=void 0===k||k,l}},{"./prepare":73,"./process":74,"cog/extend":47,"cog/getable":48,cuid:2,mbus:52,"rtc-core/detect":53}],76:[function(a,b,c){var d=a("cog/extend");b.exports=function(b,c){return a("messenger-ws")(b,d({endpoints:(c||{}).endpoints||["/"]},c))}},{"cog/extend":47,"messenger-ws":77}],77:[function(a,b,c){var d=a("ws"),e=a("wsurl"),f=a("pull-ws"),g=(a("cog/defaults"),/\/$/),h=[];b.exports=function(a,b){function c(c){function g(){if(!u){if(0===t.length)return c(new Error("Unable to connect to url: "+a));o=new d(e(t.shift())),o.addEventListener("message",h),o.addEventListener("error",m),o.addEventListener("close",l),o.addEventListener("open",n),r=o.removeEventListener||o.removeListener,p=setTimeout(g,i)}}function h(){u||(clearTimeout(p),clearTimeout(q),r.call(o,"open",n),r.call(o,"close",l),r.call(o,"error",m),r.call(o,"message",h),u=!0,c(null,s,f.sink(o,b)))}function l(a){var b=a.wasClean&&(void 0===a.code||j.indexOf(a.code)<0);return b?(clearTimeout(q),void clearTimeout(p)):m()}function m(){clearTimeout(q),clearTimeout(p),g()}function n(){s=f.source(o,b),q=setTimeout(h,100)}var o,p,q,r,s,t=[].concat(k),u=!1;g()}var i=(b||{}).timeout||1e3,j=(b||{}).failcodes||h,k=((b||{}).endpoints||["/"]).map(function(b){return a.replace(g,"")+b});return c}},{"cog/defaults":46,"pull-ws":78,ws:83,wsurl:84}],78:[function(a,b,c){function d(a,b){return{source:c.source(a),sink:c.sink(a,b)}}c=b.exports=d,c.source=a("./source"),c.sink=a("./sink")},{"./sink":81,"./source":82}],79:[function(a,b,c){arguments[4][68][0].apply(c,arguments)},{dup:68}],80:[function(a,b,c){b.exports=function(a,b){function c(){"function"==typeof f&&(f.call(a,"open",d),f.call(a,"error",e))}function d(a){c(),b()}function e(a){c(),b(a)}var f=a&&(a.removeEventListener||a.removeListener);return a.readyState>=2?b(!0):1===a.readyState?b():(a.addEventListener("open",d),void a.addEventListener("error",e))}},{}],81:[function(a,b,c){(function(c){var d=a("pull-core"),e=a("./ready");b.exports=d.Sink(function(a,b,d){function f(d,i){return d?void(g&&b.readyState<=1&&(h&&b.addEventListener("close",function(a){if(a.wasClean)h();else{var b=new Error("ws error");b.event=a,h(b)}}),b.close())):void e(b,function(d){return d?a(d,function(){}):(b.send(i),void c.nextTick(function(){a(null,f)}))})}d=d||{};var g=d.closeOnEnd!==!1,h="function"==typeof d?d:d.onClose;a(null,f)})}).call(this,a("_process"))},{"./ready":80,_process:15,"pull-core":79}],82:[function(a,b,c){var d=a("pull-core"),e=a("./ready");b.exports=d.Source(function(a){function b(b,g){return c=null,d?g(d):b?(c=g,a.close()):void e(a,function(a){return a?g(d=a):d&&d!==!0?g(d):f.length>0?g(null,f.shift()):d?g(!0):void(c=g)})}var c,d,f=[];return a.addEventListener("message",function(a){return c?c(null,a.data):void f.push(a.data)}),a.addEventListener("close",function(a){return d?void 0:c?c(d=!0):void 0}),a.addEventListener("error",function(a){d||(d=a,c&&c(d))}),b})},{"./ready":80,"pull-core":79}],83:[function(a,b,c){function d(a,b,c){var d;return d=b?new f(a,b):new f(a)}var e=function(){return this}(),f=e.WebSocket||e.MozWebSocket;b.exports=f?d:null,f&&(d.prototype=f.prototype)},{}],84:[function(a,b,c){var d=/^http(.*)$/;b.exports=function(a,b){var c=(b||{}).current||"undefined"!=typeof location&&location.href,e=c&&c.slice(0,c.indexOf(":")),f=(b||{}).insecure,g="//"==a.slice(0,2),h=!e||"file:"===e;return g?h?(f?"ws:":"wss:")+a:e.replace(d,"ws$1")+":"+a:a.replace(d,"ws$1")}},{}],85:[function(a,b,c){"use strict";var d=a("cog/logger")("rtc/cleanup"),e=["closed"],f=["addstream","datachannel","icecandidate","negotiationneeded","removestream","signalingstatechange"],g=["iceconnectionstatechange"];b.exports=function(a){function b(b){b.forEach(function(b){a["on"+b]&&(a["on"+b]=null)})}var c=a.iceConnectionState,h=e.indexOf(c)<0;b(f),h&&(d("attempting connection close, current state: "+a.iceConnectionState),a.close()),setTimeout(function(){b(g)},100)}},{"cog/logger":50}],86:[function(a,b,c){"use strict";function d(b,c,d,j){function n(){y("decoupling "+d.id+" from "+c),z.stop(),g(b),d.removeListener("sdp",p),d.removeListener("candidate",o),d.removeListener("negotiate",u),d.removeListener("message:sdp",p),d.removeListener("message:candidate",o),d.removeListener("message:negotiate",u)}function o(a){F.addIceCandidate(a)}function p(a,b){A("sdp.remote",a),b&&b.id===c&&F.setRemoteDescription(a)}function q(){y("captured pc close, iceConnectionState = "+b.iceConnectionState),n()}function r(){y("captured pc disconnect, monitoring connection status"),w=setTimeout(function(){y("manually closing connection after disconnect timeout"),g(b)},D),z.on("statechange",s)}function s(){return y("connection state changed to: "+b.iceConnectionState),m.indexOf(b.iceConnectionState)>=0?void 0:(v(),l.indexOf(b.iceConnectionState)>=0?z("closed"):void z.once("disconnect",r))}function t(a){var b=a.candidate&&k(a.candidate);a.candidate?(v(),A("ice.local",b),d.to(c).send("/candidate",b),C=!1):C||(C=!0,A("ice.gathercomplete"),d.to(c).send("/endofcandidates",{}))}function u(a){a.id===c&&(A("negotiate.request",a.id),H())}function v(){z.off("statechange",s),y("reset disconnect timer, state: "+b.iceConnectionState),clearTimeout(w)}var w,x=(j||{}).debugLabel||"rtc",y=a("cog/logger")(x+"/couple"),z=h(b,c,d,(j||{}).logger),A=e("",z),B=(j||{}).reactive,C=!0,D=(j||{}).disconnectTimeout||1e4,E=d.isMaster(c),F=f(b,j),G=i(function(){return E?void F.createOffer():d.to(c).send("/negotiate")},100,{leading:!1}),H=i(F.createOffer,100,{leading:!1});return B&&(b.onnegotiationneeded=function(){A("negotiate.renegotiate"),G()}),b.onicecandidate=t,F.on("sdp.local",function(a){d.to(c).send("/sdp",a)}),d.on("sdp",p),d.on("candidate",o),d.on("message:sdp",p),d.on("message:candidate",o),E&&(d.on("negotiate",u),d.on("message:negotiate",u)),z.once("closed",q),z.once("disconnected",r),z.createOffer=G,z}var e=a("mbus"),f=a("rtc-taskqueue"),g=a("./cleanup"),h=a("./monitor"),i=a("cog/throttle"),j=a("whisk/pluck"),k=j("candidate","sdpMid","sdpMLineIndex"),l=["closed","failed"],m=["checking"];b.exports=d},{"./cleanup":85,"./monitor":90,"cog/logger":50,"cog/throttle":51,mbus:52,"rtc-taskqueue":91,"whisk/pluck":102}],87:[function(a,b,c){"use strict";b.exports=a("rtc-core/detect")},{"rtc-core/detect":53}],88:[function(a,b,c){"use strict";var d=a("cog/logger")("generators"),e=a("./detect"),f=a("cog/defaults"),g={create:{dtls:function(a){e.moz||(a.optional=(a.optional||[]).concat({DtlsSrtpKeyAgreement:!0}))}}};c.config=function(a){var b=(a||{}).iceServerGenerator;return f({},a,{iceServers:"function"==typeof b?b():[]})},c.connectionConstraints=function(a,b){var c,e={},h=g.create;return Object.keys(a||{}).forEach(function(a){h[a]&&h[a](e)}),c=f({},b,e),d("generated connection constraints: ",c),c}},{"./detect":87,"cog/defaults":46,"cog/logger":50}],89:[function(a,b,c){"use strict";var d=a("./generators"),e=c.detect=a("./detect"),f=a("rtc-core/plugin");c.logger=a("cog/logger");var g=c.RTCPeerConnection=e("RTCPeerConnection");c.couple=a("./couple"),c.createConnection=function(a,b){var c=f((a||{}).plugins),e=(a||{}).RTCPeerConnection||g,h=d.config(a);return b=d.connectionConstraints(a,b),c&&"function"==typeof c.createConnection?c.createConnection(h,b):new e(h,b)}},{"./couple":86,"./detect":87,"./generators":88,"cog/logger":50,"rtc-core/plugin":56}],90:[function(a,b,c){"use strict";function d(a){return f[a]||a}var e=a("mbus"),f={completed:"connected"},g=["signalingstatechange","iceconnectionstatechange"];b.exports=function(a,b,c,f){function h(){var b=d(a.iceConnectionState);k("statechange",a,b),j!==b&&(k(b),j=b)}function i(){k("closed")}var j,k=e("",f);return a.onclose=i,g.forEach(function(b){a["on"+b]=h}),k.stop=function(){a.onclose=null,g.forEach(function(b){a["on"+b]=null})},k.checkState=h,a?(j=d(a.iceConnectionState),k):k}},{mbus:52}],91:[function(a,b,c){var d=a("rtc-core/detect"),e=a("rtc-core/plugin"),f=a("priorityqueuejs"),g=a("whisk/pluck"),h=g("sdp","type"),i=a("rtc-validator/candidate"),j=a("rtc-sdpclean"),k=a("rtc-sdp"),l=100,m=1e3,n=["addIceCandidate","setLocalDescription","setRemoteDescription","createAnswer","createOffer"],o={setLocalDescription:"setlocaldesc",setRemoteDescription:"setremotedesc",createOffer:"offer",createAnswer:"answer"},p={data:"application"},q=["have-remote-offer","have-local-pranswer"];b.exports=function(b,c){function g(a,d){function e(){L("ice.remote.applied",h),d()}function f(a){L("ice.remote.invalid",h),d(a)}var g=a.args[0];if(c&&c.filterCandidate&&!c.filterCandidate(g))return L("ice.remote.filtered",h),d();var h=g&&g.candidate&&u(g);return h?void b.addIceCandidate(h,e,f):d()}function r(){var a=!K.isEmpty()&&K.peek(),c=a&&I(a);return P=0,c?(a=K.deq(),void a.fn(a,function(b){var c=a.fail||Q,d=a.pass,e=a.name;return b?(console.error(e+" task failed: ",b),c(b)):("function"==typeof d&&d.apply(a,[].slice.call(arguments,1)),void J())})):(a&&z(a)&&(L("task.expire",a),K.deq()),!K.isEmpty()&&E(b)&&J())}function s(a){var c=[],d=a&&j(a.sdp,{collector:c});return a&&d!==a.sdp&&(console.info("invalid lines removed from sdp: ",c),a.sdp=d),"function"==typeof R&&(a.sdp=R(a.sdp,b)),a}function t(){return q.indexOf(b.signalingState)>=0?L.createAnswer():void 0}function u(a){return O&&"function"==typeof O.createIceCandidate?O.createIceCandidate(a):new U(a)}function v(a){return O&&"function"==typeof O.createSessionDescription?O.createSessionDescription(a):new T(a)}function w(){L("sdp.local",h(this.args[0]))}function x(a,b,c){return function(){var d=[].slice.call(arguments);c&&"function"==typeof c.processArgs&&(d=d.map(c.processArgs));var e=M.indexOf(a);K.enq({args:d,name:a,fn:b,priority:e>=0?e:l,start:Date.now(),checks:[E].concat((c||{}).checks||[]),pass:(c||{}).pass,fail:(c||{}).fail}),J()}}function y(a,c){function d(b){L.apply(L,["negotiate.error",a.name,b].concat(a.args)),c(b)}function e(){L.apply(L,[["negotiate",g,"ok"],a.name].concat(a.args)),c.apply(null,[null].concat([].slice.call(arguments)))}var f=b[a.name],g=o[a.name]||(a.name||"").toLowerCase(),h=[e,d],i="createOffer"===a.name;return f?(L.apply(L,["negotiate."+g].concat(a.args)),void f.apply(b,a.args.concat(h).concat(i?B():[]))):c(new Error('cannot call "'+a.name+'" on RTCPeerConnection'))}function z(a){return"number"==typeof a.ttl&&a.start+a.ttl<Date.now()}function A(a){for(;a&&a.candidate&&a.candidate.candidate;)a=a.candidate;return a}function B(){var a={offertoreceivevideo:"OfferToReceiveVideo",offertoreceiveaudio:"OfferToReceiveAudio",icerestart:"IceRestart",voiceactivitydetection:"VoiceActivityDetection"},b={OfferToReceiveVideo:!0,OfferToReceiveAudio:!0};return Object.keys(c||{}).forEach(function(d){a[d.toLowerCase()]&&(b[a[d.toLowerCase()]]=c[d])}),{mandatory:b}}function C(a,b){return a.__hasDesc||(a.__hasDesc=!!a.remoteDescription)}function D(a){return"have-local-offer"!==a.signalingState}function E(a){return"closed"!==a.signalingState}function F(a,b){return b.__valid||(b.__valid=0===i(b.args[0]).length)}function G(a,b){var c=b.args[0]&&b.args[0].sdpMid;if(c=p[c]||c,""===c)return!0;if(S||!a.__mediaTypes){var d=k(a.remoteDescription&&a.remoteDescription.sdp),e=d.getMediaTypes();e&&e.length>0&&(a.__mediaTypes=d.getMediaTypes())}return a.__mediaTypes&&a.__mediaTypes.indexOf(c)>=0}function H(a,b){var c=[a,b],d=c.map(I),e=c.map(function(a,b){var c=d[b];return c?a.priority:m});return e[1]-e[0]}function I(a){return(a.checks||[]).reduce(function(c,d){return c&&d(b,a)},!0)}function J(){P||(P=setTimeout(r,N))}c=c||{};var K=new f(H),L=a("mbus")("",(c||{}).logger),M=(c||{}).priorities||n,N=(c||{}).interval||50,O=e((c||{}).plugins),P=0,Q=L.bind(L,"fail"),R=(c||{}).sdpfilter||(c||{}).sdpFilter,S="always"===c.sdpParseMode,T=(c||{}).RTCSessionDescription||d("RTCSessionDescription"),U=(c||{}).RTCIceCandidate||d("RTCIceCandidate");return L.addIceCandidate=x("addIceCandidate",g,{processArgs:A,checks:[C,F,G],ttl:5e3}),L.setLocalDescription=x("setLocalDescription",y,{processArgs:s,pass:w}),L.setRemoteDescription=x("setRemoteDescription",y,{processArgs:v,pass:t}),L.createOffer=x("createOffer",y,{checks:[D],pass:L.setLocalDescription}),L.createAnswer=x("createAnswer",y,{pass:L.setLocalDescription}),L}},{mbus:52,priorityqueuejs:92,"rtc-core/detect":53,"rtc-core/plugin":56,"rtc-sdp":93,"rtc-sdpclean":95,"rtc-validator/candidate":96,"whisk/pluck":102}],92:[function(a,b,c){function d(a){this._comparator=a||d.DEFAULT_COMPARATOR,this._elements=[]}b.exports=d,d.DEFAULT_COMPARATOR=function(a,b){return"number"==typeof a&&"number"==typeof b?a-b:(a=a.toString(),b=b.toString(),a==b?0:a>b?1:-1)},d.prototype.isEmpty=function(){return 0===this.size()},d.prototype.peek=function(){if(this.isEmpty())throw new Error("PriorityQueue is empty");return this._elements[0]},d.prototype.deq=function(){var a=this.peek(),b=this._elements.pop(),c=this.size();if(0===c)return a;this._elements[0]=b;for(var d=0;c>d;){var e=d,f=2*d+1,g=2*d+2;if(c>f&&this._compare(f,e)>=0&&(e=f),c>g&&this._compare(g,e)>=0&&(e=g),e===d)break;this._swap(e,d),d=e}return a},d.prototype.enq=function(a){for(var b=this._elements.push(a),c=b-1;c>0;){var d=Math.floor((c-1)/2);if(this._compare(c,d)<=0)break;this._swap(d,c),c=d}return b},d.prototype.size=function(){return this._elements.length},d.prototype.forEach=function(a){return this._elements.forEach(a)},d.prototype._compare=function(a,b){return this._comparator(this._elements[a],this._elements[b])},d.prototype._swap=function(a,b){var c=this._elements[a];this._elements[a]=this._elements[b],this._elements[b]=c}},{}],93:[function(a,b,c){"use strict";var d=a("whisk/nub"),e=a("whisk/pluck"),f=a("whisk/flatten"),g=/\r?\n/,h=/\r?\n$/,i=["a","c","b","k"],j=a("./parsers");b.exports=function(a){var b,c={},k=[],l=a.split(g).filter(Boolean).map(function(a){return a.split("=")}),m=(d(l.filter(function(a){return a[0]&&i.indexOf(a[0])<0}).map(e(0))),c.findLine=function(a,b){var c=k.filter(function(b){return b[0]===a})[b||0];return c&&c[1]});return l.forEach(function(a){var c=j[a[0]];c?b=c(k,a):b?b=b(a):k.push(a)}),c.addIceCandidate=function(a){var b=(a||{}).lineIndex||(a||{}).sdpMLineIndex,c="undefined"!=typeof b&&m("m",b),d=(a||{}).candidate;c&&d&&c.childlines.push(d.replace(h,"").split("="))},c.getMediaTypes=function(){function a(a){return a[1].def.split(/\s/)[0]}return k.filter(function(a){return"m"===a[0]&&a[1]&&a[1].def}).map(a)},c.toString=function(){return k.map(function(a){return"function"==typeof a[1].toArray?a[1].toArray():[a]}).reduce(f).map(function(a){return a.join("=")}).join("\n")},c}},{"./parsers":94,"whisk/flatten":99,"whisk/nub":101,"whisk/pluck":102}],94:[function(a,b,c){"use strict";c.m=function(a,b){function c(a){return d.childlines.push(a),c}var d={def:b[1],childlines:[],toArray:function(){return[["m",d.def]].concat(d.childlines)}};return a.push(["m",d]),c}},{}],95:[function(a,b,c){function d(a){var b=f.exec(a);return b&&b[0]}var e=[[/^(a\=candidate.*)$/,a("rtc-validator/candidate")]],f=/(\r?\n|\\r\\n)/;b.exports=function(a,b){var c=d(a),f=a.split(c),g=(b||{}).collector;return f=f.filter(function(a){var b=e.reduce(function(b,c,d){return"undefined"!=typeof b?b:c[0].exec(a)&&{line:a.replace(c[0],"$1"),fn:c[1]}},void 0),c=b?b.fn(b.line):[];return g&&c.forEach(function(a){g.push(a)}),0===c.length}),f.join(c)}},{"rtc-validator/candidate":96}],96:[function(a,b,c){function d(a,b){var c=g[b];return c&&!c[0].test(a)?(e(c[2]+" part failed validation: "+a),new Error(c[1])):void 0}var e=a("cog/logger")("rtc-validator"),f=/^(?:a=)?candidate:/,g=[[/.+/,"invalid foundation component","foundation"],[/\d+/,"invalid component id","component-id"],[/(UDP|TCP)/i,"transport must be TCP or UDP","transport"],[/\d+/,"numeric priority expected","priority"],[a("reu/ip"),"invalid connection address","connection-address"],[/\d+/,"invalid connection port","connection-port"],[/typ/,'Expected "typ" identifier',"type classifier"],[/.+/,"Invalid candidate type specified","candidate-type"]];b.exports=function(a){var b=[],c=a&&(a.candidate||a),e=c&&f.exec(c),g=e&&c.slice(e[0].length).split(/\s/);return c?e?b=b.concat(g.map(d)).filter(Boolean):[new Error("candidate did not match expected sdp line format")]:[new Error("empty candidate")]}},{"cog/logger":50,"reu/ip":97}],97:[function(a,b,c){b.exports=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(?:(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){6})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:::(?:(?:(?:[0-9a-fA-F]{1,4})):){5})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){4})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,1}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){3})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,2}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){2})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,3}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:[0-9a-fA-F]{1,4})):)(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,4}(?:(?:[0-9a-fA-F]{1,4})))?::)(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,5}(?:(?:[0-9a-fA-F]{1,4})))?::)(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,6}(?:(?:[0-9a-fA-F]{1,4})))?::))))$/},{}],98:[function(a,b,c){b.exports=function(a,b){return arguments.length>1?a===b:function(b){return a===b}}},{}],99:[function(a,b,c){b.exports=function(a,b){return a=Array.isArray(a)?a:[a],a.concat(b)}},{}],100:[function(a,b,c){b.exports=function(a){return function(b){for(var c=[],d=0,e=b.length;e>d;d++){for(var f=!1,g=c.length;g--;)f=f||a(b[d],c[g]);f||(c[c.length]=b[d])}return c}}},{}],101:[function(a,b,c){b.exports=a("./nub-by")(a("./equality"))},{"./equality":98,"./nub-by":100}],102:[function(a,b,c){b.exports=function(){function a(a,b){return function(c){var d=0,e=c;do e=e&&e[a[d++]];while(e&&b>=d);return e}}var b=[];return[].slice.call(arguments).forEach(function(a){var c="number"==typeof a?[a]:(a||"").split(".");b[b.length]={name:c[0],parts:c,maxIdx:c.length-1}}),b.length<=1?a(b[0].parts,b[0].maxIdx):function(c){for(var d={},e=0,f=b.length;f>e;e++)d[b[e].name]=a([b[e].parts[0]],0)(c);return d}}},{}],103:[function(a,b,c){(function(c){"use strict";function d(a,b){return this instanceof d?(e.Duplex.call(this),this.id=a,this.channel=b,this.channel.binaryType="arraybuffer",this.channel.addEventListener("message",this.handleRtcMessage.bind(this)),this.channel.addEventListener("close",this.handleRtcClose.bind(this)),this.channel.addEventListener("open",this.handleRtcOpen.bind(this)),void this.channel.addEventListener("error",this.handleRtcError.bind(this))):new d(a,b)}var e=a("stream"),f=a("typedarray-to-buffer"),g=a("util"),h=a("debug")("rtcstream");b.exports=d,g.inherits(d,e.Duplex),d.prototype._read=function(){},d.prototype._write=function(a,b,d){try{c.isBuffer(a)?this.channel.send(new Uint8Array(a).buffer):this.channel.send(a)}finally{d()}},d.prototype.handleRtcMessage=function(a){var b=a.data?a.data:a;this.push(f(b)),this.emit("readable")},d.prototype.handleRtcClose=function(a){this.push(null)},d.prototype.handleRtcOpen=function(a){h("open event: %s",this.id)},d.prototype.handleRtcError=function(a){h("error event: %s %s",this.id,a)}}).call(this,a("buffer").Buffer)},{buffer:7,debug:3,stream:27,"typedarray-to-buffer":104,util:30}],104:[function(a,b,c){(function(c){var d=a("is-typedarray").strict;b.exports=function(a){var b=c.TYPED_ARRAY_SUPPORT?c._augment:function(a){return new c(a)};return a instanceof Uint8Array?b(a):a instanceof ArrayBuffer?b(new Uint8Array(a)):d(a)?b(new Uint8Array(a.buffer,a.byteOffset,a.byteLength)):new c(a)}}).call(this,a("buffer").Buffer)},{buffer:7,"is-typedarray":105}],105:[function(a,b,c){function d(a){return e(a)||f(a)}function e(a){return a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array}function f(a){return h[g.call(a)]}b.exports=d,d.strict=e,d.loose=f;var g=Object.prototype.toString,h={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0}},{}]},{},[1])(1)});